window.VERSION="2.4.2";
/*
	bwmon v2.4.2
	(C) 2010 - 2018 VREM Software Development
	https://github.com/VREMSoftwareDevelopment/bwmon
	License: Apache-2.0
*/
!function(){"use strict";angular.module("BWMonApp",["ngRoute","ui.bootstrap","angularUtils.directives.dirPagination","n3-line-chart","BWMonApp.Filters","BWMonApp.Navigation","BWMonApp.UsageByUser","BWMonApp.UsageByMonth","BWMonApp.UsageByYear","BWMonApp.SelectYear","BWMonApp.SelectMonth","BWMonApp.ChartType","BWMonApp.ChartService","BWMonApp.DataService"]).config(["$routeProvider",function($routeProvider){$routeProvider.otherwise({redirectTo:"/UsageByUser"})}]).controller("rootController",["$scope","$interval",function($scope,$interval){var rootController=this,updateClock=function(){rootController.clock=new Date},clockOn=$interval(updateClock,1e3);updateClock(),rootController.currentDate=rootController.clock,rootController.version=window.VERSION||"SNAPSHOT",$scope.$on("$destroy",function(e){$interval.cancel(clockOn)})}]),angular.module("BWMonApp").run(["$templateCache",function($templateCache){$templateCache.put("index.tpl.html",'<!doctype html>\n<html lang="en" ng-app="BWMonApp" ng-controller="rootController as rootCtrl">\n<head>\n\t<meta charset="utf-8">\n\t<meta name="viewport" content="width=device-width,initial-scale=1">\n\t<title>Bandwidth Monitor Usage</title>\n\x3c!-- @ifdef PRODUCTION --\x3e\n\t<link rel="stylesheet" href="css/bootstrap.min.css">\n\t<link rel="stylesheet" href="css/bwmon.min.css">\n\t<link rel="stylesheet" href="css/LineChart.min.css">\t\n\x3c!-- @endif --\x3e\n\x3c!-- @ifdef DEVELOPMENT --\x3e\n\t<link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">\n\t<link rel="stylesheet" href="../node_modules/n3-charts/build/LineChart.min.css">\t\n\t<link rel="stylesheet" href="css/app.css">\n\x3c!-- @endif --\x3e\n</head>\n<body class="container">\n\t<h2>\n\t\t<span class="pull-left">Bandwidth Monitor Usage</span>\n\t\t<small class="pull-right">{{rootCtrl.clock  | date: \'medium\'}}</small>\n\t\t<span class="clearfix"></span>\n\t</h2>\n\t<navigation></navigation>\n\t<div class="ng-view-min-height">\n\t\t<div ng-view></div>\n\t</div>\n\t<h5>\n\t\t<b>All usage information is in gigabytes</b>\n\t</h5>\n\t<h5>\n\t\t<span class="pull-left">This page was generated on {{::rootCtrl.currentDate | date: \'medium\'}}</span>\n\t\t<span class="pull-right">Version {{::rootCtrl.version}}</span>\n\t\t<span class="clearfix"></span>\n\t</h5>\n\t<script src="bwmonUsage.js"><\/script>\n\x3c!-- @ifdef PRODUCTION --\x3e\n\t<script src="js/libs.min.js"><\/script>\n\t<script src="js/bwmon.min.js"><\/script>\n\x3c!-- @endif --\x3e\n\x3c!-- @ifdef DEVELOPMENT --\x3e\n\t<script src="../node_modules/angular/angular.min.js"><\/script>\n\t<script src="../node_modules/angular-route/angular-route.min.js"><\/script>\n\t<script src="../node_modules/angular-ui-bootstrap/dist/ui-bootstrap-tpls.js"><\/script>\n\t<script src="../node_modules/angular-utils-pagination/dirPagination.js"><\/script>\n\t<script src="../node_modules/underscore/underscore-min.js"><\/script>\n\t<script src="../node_modules/moment/min/moment.min.js"><\/script>\n\t<script src="../node_modules/d3/d3.min.js"><\/script>\n\t<script src="../node_modules/n3-charts/build/LineChart.js"><\/script>\n\t<script src="app.js"><\/script>\n\t<script src="navigation/navigation.js"><\/script>\n\t<script src="services/dataService.js"><\/script>\n\t<script src="services/chartService.js"><\/script>\n\t<script src="usagebyuser/usageByUser.js"><\/script>\n\t<script src="usagebymonth/usageByMonth.js"><\/script>\n\t<script src="usagebyyear/usageByYear.js"><\/script>\n\t<script src="common/filters.js"><\/script>\n\t<script src="common/selectYear.js"><\/script>\n\t<script src="common/selectMonth.js"><\/script>\n\t<script src="common/chartType.js"><\/script>\n\x3c!-- @endif --\x3e\n</body>\n</html>\n'),$templateCache.put("usagebymonth/usageByMonth.tpl.html",'<uib-tabset justified="true">\n\t<uib-tab id="Data" heading="Data">\n\t\t<form class="form-inline">\n\t\t\t<div class="form-group">\n\t\t\t\t<select-year ng-model="usageByMonthCtrl.selected.year" class="form-control" name="year">\n\t\t\t</div>\n\t\t</form>\n\t\t<div class="table-responsive">\n\t\t\t<table class="table table-striped table-hover table-condensed">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t<a class="nounderline" id="monthSort" href="" ng-click="usageByMonthCtrl.setOrder(\'id\')">Month</a>\n\t\t\t\t\t\t\t<span class="sortorder" ng-class="usageByMonthCtrl.getOrder(\'id\')"></span>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-right">Down</th>\n\t\t\t\t\t\t<th class="text-right">Up</th>\n\t\t\t\t\t\t<th class="text-right">\n\t\t\t\t\t\t\t<a class="nounderline" id="totalSort" href="" ng-click="usageByMonthCtrl.setOrder(\'total\')">Total</a>\n\t\t\t\t\t\t\t<span class="sortorder" ng-class="usageByMonthCtrl.getOrder(\'total\')"></span>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-right">Percent</th>\n\t\t\t\t\t\t<th class="text-right">Average</th>\n\t\t\t\t\t\t<th class="text-right">Days</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr ng-repeat="current in usageByMonthCtrl.data | orderBy:usageByMonthCtrl.predicate:usageByMonthCtrl.descending">\n\t\t\t\t\t\t<td>{{::current.id | toMonth}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.download | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.upload | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.total | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.percent | number:1}}%</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.average | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.days}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t\t<tfoot>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{{usageByMonthCtrl.selected.year}} Totals</th>\n\t\t\t\t\t\t<th class="text-right">{{usageByMonthCtrl.total.download | usageInGBytes | number:3}}</th>\n\t\t\t\t\t\t<th class="text-right">{{usageByMonthCtrl.total.upload | usageInGBytes | number:3}}</th>\n\t\t\t\t\t\t<th class="text-right">{{usageByMonthCtrl.total.total | usageInGBytes | number:3}}</th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th class="text-right">{{usageByMonthCtrl.total.average | usageInGBytes | number:3}}</th>\n\t\t\t\t\t\t<th class="text-right">{{usageByMonthCtrl.total.days}}</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</tfoot>\n\t\t\t</table>\n\t\t</div>\n\t</uib-tab>\n\t<uib-tab id="Chart" heading="Chart">\n\t\t<form class="form-inline">\n\t\t\t<div class="form-group">\n\t\t\t\t<select-year ng-model="usageByMonthCtrl.selected.year" class="form-control" name="year">\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<chart-type ng-model="usageByMonthCtrl.selected.chartType" class="form-control" name="chartType">\n\t\t\t</div>\n\t\t</form>\n\t\t<div class="chart-data">\n\t\t\t<linechart id="chartData" data="usageByMonthCtrl.chartData" options="usageByMonthCtrl.chartOptions"></linechart>\n\t\t</div>\n\t</uib-tab>\n</uib-tabset>\n'),$templateCache.put("usagebyuser/usageByUser.tpl.html",'<uib-tabset justified="true">\n\t<uib-tab id="Data" heading="Data">\n\t\t<form class="form-inline">\n\t\t\t<div class="form-group">\n\t\t\t\t<select-year ng-model="usageByUserCtrl.selected.year" class="form-control" name="year">\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<select-month ng-model="usageByUserCtrl.selected.month" year="usageByUserCtrl.selected.year" class="form-control" name="month">\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<input ng-model="usageByUserCtrl.selected.user" class="form-control" name="user" placeholder="IP, MAC or User">\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<dir-pagination-controls max-size="5" boundary-links="true"></dir-pagination-controls>\n\t\t\t</div>\n\t\t</form>\n\t\t<div class="table-responsive">\n\t\t\t<table class="table table-striped table-hover table-condensed">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-left">\n\t\t\t\t\t\t\t<a class="nounderline" id="IPSort" href="" ng-click="usageByUserCtrl.setOrder(\'IP\')">IP</a>\n\t\t\t\t\t\t\t<span class="sortorder" ng-class="usageByUserCtrl.getOrder(\'IP\')"></span>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-left">\n\t\t\t\t\t\t\t<a class="nounderline" id="MACSort" href="" ng-click="usageByUserCtrl.setOrder(\'MAC\')">MAC</a>\n\t\t\t\t\t\t\t<span class="sortorder" ng-class="usageByUserCtrl.getOrder(\'MAC\')"></span>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-left">\n\t\t\t\t\t\t\t<a class="nounderline" id="userSort" href="" ng-click="usageByUserCtrl.setOrder(\'user\')">User</a>\n\t\t\t\t\t\t\t<span class="sortorder" ng-class="usageByUserCtrl.getOrder(\'user\')"></span>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-right">Down</th>\n\t\t\t\t\t\t<th class="text-right">Up</th>\n\t\t\t\t\t\t<th class="text-right">\n\t\t\t\t\t\t\t<a class="nounderline" id="totalSort" href="" ng-click="usageByUserCtrl.setOrder(\'total\')">Total</a>\n\t\t\t\t\t\t\t<span class="sortorder" ng-class="usageByUserCtrl.getOrder(\'total\')"></span>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-right">Percent</th>\n\t\t\t\t\t\t<th class="text-right">Average</th>\n\t\t\t\t\t\t<th class="text-right">Days</th>\n\t\t\t\t\t\t<th>First Seen</th>\n\t\t\t\t\t\t<th>Last Seen</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr dir-paginate="current in usageByUserCtrl.data | orderBy:usageByUserCtrl.predicate:usageByUserCtrl.descending | itemsPerPage:usageByUserCtrl.pageSize">\n\t\t\t\t\t\t<td>{{$index+1}}</td>\n\t\t\t\t\t\t<td>{{::current.IP}}</td>\n\t\t\t\t\t\t<td>{{::current.MAC}}</td>\n\t\t\t\t\t\t<td>{{::current.user}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.download | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.upload | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.total | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.percent | number:1}}%</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.average | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.days}}</td>\n\t\t\t\t\t\t<td>{{::current.firstSeen | timeToDate | date: \'medium\'}}</td>\n\t\t\t\t\t\t<td>{{::current.lastSeen | timeToDate | date: \'medium\'}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t\t<tfoot>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th colspan="4">{{usageByUserCtrl.selected.month}} {{usageByUserCtrl.selected.year}} Totals</th>\n\t\t\t\t\t\t<th class="text-right">{{usageByUserCtrl.total.download | usageInGBytes | number:3}}</th>\n\t\t\t\t\t\t<th class="text-right">{{usageByUserCtrl.total.upload | usageInGBytes | number:3}}</th>\n\t\t\t\t\t\t<th class="text-right">{{usageByUserCtrl.total.total | usageInGBytes | number:3}}</th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th class="text-right">{{usageByUserCtrl.total.average | usageInGBytes | number:3}}</th>\n\t\t\t\t\t\t<th class="text-right">{{usageByUserCtrl.total.days}}</th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</tfoot>\n\t\t\t</table>\n\t\t</div>\n\t</uib-tab>\n\t<uib-tab id="Chart" heading="Chart">\n\t\t<form class="form-inline">\n\t\t\t<div class="form-group">\n\t\t\t\t<select-year ng-model="usageByUserCtrl.selected.year" class="form-control" name="year">\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<select-month ng-model="usageByUserCtrl.selected.month" year="usageByUserCtrl.selected.year" class="form-control" name="month">\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<input ng-model="usageByUserCtrl.selected.user" class="form-control" name="user" placeholder="IP, MAC or User">\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<chart-type ng-model="usageByUserCtrl.selected.chartType" class="form-control" name="chartType">\n\t\t\t</div>\n\t\t</form>\n\t\t<div class="chart-data">\n\t\t\t<linechart id="chartData" data="usageByUserCtrl.chartData" options="usageByUserCtrl.chartOptions"></linechart>\n\t\t</div>\n\t</uib-tab>\n</uib-tabset>\n'),$templateCache.put("usagebyyear/usageByYear.tpl.html",'<uib-tabset justified="true">\n\t<uib-tab id="Data" heading="Data">\n\t\t<div class="table-responsive">\n\t\t\t<table class="table table-striped table-hover table-condensed">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t<a class="nounderline" id="yearSort" href="" ng-click="usageByYearCtrl.setOrder(\'id\')">Year</a>\n\t\t\t\t\t\t\t<span class="sortorder" ng-class="usageByYearCtrl.getOrder(\'id\')"></span>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-right">Down</th>\n\t\t\t\t\t\t<th class="text-right">Up</th>\n\t\t\t\t\t\t<th class="text-right">\n\t\t\t\t\t\t\t<a class="nounderline" id="totalSort" href="" ng-click="usageByYearCtrl.setOrder(\'total\')">Total</a>\n\t\t\t\t\t\t\t<span class="sortorder" ng-class="usageByYearCtrl.getOrder(\'total\')"></span>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th class="text-right">Average</th>\n\t\t\t\t\t\t<th class="text-right">Days</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr ng-repeat="current in usageByYearCtrl.data | orderBy:usageByYearCtrl.predicate:usageByYearCtrl.descending">\n\t\t\t\t\t\t<td>{{current.id}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.download | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.upload | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.total | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.average | usageInGBytes | number:3}}</td>\n\t\t\t\t\t\t<td class="text-right">{{::current.days}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</uib-tab>\n\t<uib-tab id="Chart" heading="Chart">\n\t\t<form class="form-inline">\n\t\t\t<div class="form-group">\n\t\t\t\t<chart-type ng-model="usageByYearCtrl.selected.chartType" class="form-control" name="chartType">\n\t\t\t</div>\n\t\t</form>\n\t\t<div class="chart-data">\n\t\t\t<linechart id="chartData" data="usageByYearCtrl.chartData" options="usageByYearCtrl.chartOptions"></linechart>\n\t\t</div>\n\t</uib-tab>\n</uib-tabset>\n')}]),angular.module("BWMonApp.ChartType",[]).directive("chartType",function(){return{restrict:"E",replace:!0,require:"ngModel",template:'<select ng-options="choiceChartType for choiceChartType in ::chartTypeCtrl.chartTypes"></select>',scope:{},bindToController:{chartType:"=ngModel"},controller:["chartService",function(chartService){var chartTypes=chartService.getChartTypes();angular.extend(this,{chartTypes:chartTypes,chartType:chartTypes[0]})}],controllerAs:"chartTypeCtrl"}}),angular.module("BWMonApp.Filters",[]).filter("startFrom",function(){return function(input,start){return input.slice(start)}}).filter("toMonth",function(){return function(month){return moment([2012,month]).format("MMMM")}}).filter("timeToDate",function(){return function(time){return new Date(1e3*time)}}).filter("usageInGBytes",function(){return function(value){return Math.round(value/1e3)/1e3}}),angular.module("BWMonApp.SelectMonth",[]).directive("selectMonth",function(){return{restrict:"E",replace:!0,require:["ngModel","year"],template:'<select ng-options="choiceMonth for choiceMonth in selectMonthCtrl.months"></select>',scope:{},bindToController:{month:"=ngModel",year:"=year"},controller:["$scope","dataService",function($scope,dataService){var ctrl=this,updateMonth=function(){var months=dataService.getMonths(ctrl.year);ctrl.months=months,ctrl.month=months[0]};updateMonth(),$scope.$watch("selectMonthCtrl.year",function(){updateMonth()},!0)}],controllerAs:"selectMonthCtrl"}}),angular.module("BWMonApp.SelectYear",[]).directive("selectYear",function(){return{restrict:"E",replace:!0,require:"ngModel",template:'<select ng-options="choiceYear for choiceYear in ::selectYearCtrl.years"></select>',scope:{},bindToController:{year:"=ngModel"},controller:["dataService",function(dataService){var years=dataService.getYears();angular.extend(this,{years:years,year:years[0]})}],controllerAs:"selectYearCtrl"}}),angular.module("BWMonApp.Navigation",[]).directive("navigation",function(){return{restrict:"E",replace:!0,template:['<div class="navbar navbar-default">','<ul class="nav navbar-nav">','<li ng-repeat="route in ::navigationCtrl.routes" ng-class="{active: navigationCtrl.isActive(\'{{::route.href}}\')}" >','<a href="#{{::route.href}}">{{::route.name}}</a>',"</li>","</ul>","</div>"].join(""),scope:{},controller:["$scope","$location",function($scope,$location){angular.extend(this,{isActive:function(viewLocation){return viewLocation===$location.path()},routes:[{href:"/UsageByUser",name:"Usage By User"},{href:"/UsageByMonth",name:"Usage By Month"},{href:"/UsageByYear",name:"Usage By Year"}]})}],controllerAs:"navigationCtrl"}}),angular.module("BWMonApp.ChartService",[]).factory("chartService",function(){var _getChartTypes=function(){return[["column"],["line","dot"],["line","dot","area"]]};return{getChartTypes:_getChartTypes,getChartOptions:function(labelFn,tooltipFn){return{margin:{top:40,right:40,bottom:40,left:40},series:[{axis:"y",dataset:"dataset00",key:"y",color:"#3366CC",label:"GBytes",grid:{x:!1,y:!0},type:["column"],id:"series00"}],axes:{x:{key:"x",tickFormat:labelFn},y:{min:0}},tooltipHook:function(d){if(d)return{rows:d.map(function(s){return{label:tooltipFn(s.row.x),value:" | "+s.row.y1+" GB",color:s.series.color,id:s.series.id}})}}}},getChartData:function(data){return{dataset00:data}}}}),angular.module("BWMonApp.DataService",[]).factory("dataService",function(){var _data=bwmonData(),_sort=function(a,b){var result=b.year-a.year;return 0===result&&0===(result=b.month-a.month)&&0===(result=a.IP<b.IP?-1:a.IP>b.IP?1:0)&&(result=b.id-a.id),result},_sum=function(entries,days,id){var download=0,upload=0,total=0;return entries.forEach(function(entry){download+=entry.download,upload+=entry.upload,total+=entry.total}),{id:id,download:download,upload:upload,total:total,average:+(total/days).toFixed(3),days:days}},_getMonths=function(year){var result=_.where(_data,{year:year});return result=_.uniq(result,function(item){return item.month}),result=_.pluck(result,"month")},_getYears=function(){var result=_.uniq(_data,function(item){return item.year});return result=_.pluck(result,"year")},_getUsageByYear=function(year){var days=moment([year,11,31]).dayOfYear(),usage=_.where(_data,{year:year});return _sum(usage,days,year)},_getUsageByUser=function(year,month,filter){var usage=_.where(_data,{year:year,month:month}),days=moment([year,month]).daysInMonth(),total=_sum(usage,days,month);return filter&&(usage=_.filter(usage,function(entry){var filterLowerCase=filter.toLowerCase();return-1!==entry.IP.toLowerCase().indexOf(filterLowerCase)||-1!==entry.MAC.toLowerCase().indexOf(filterLowerCase)||-1!==entry.user.toLowerCase().indexOf(filterLowerCase)})),_.each(usage,function(value,index){value.percent=+(100*value.total/total.total).toFixed(1)}),{usage:usage,total:total}},_getChartData=function(data){var result=_.map(data,function(entry,key){return{x:entry.id,y:(value=entry.total,Math.round(value/1e3)/1e3)};var value});return result.sort(function(a,b){var result=a.x-b.x;return 0===result&&(result=a.y-b.y),result}),result};return _data.sort(_sort),{getYears:_getYears,getMonths:function(year){var result=_getMonths(year);return result=_.map(result,function(month){return moment([year,month]).format("MMMM")})},getUsageByUser:function(year,month,filter){var result=_getUsageByUser(year,moment(year+"-"+month,"YYYY-MMMM").month(),filter);return{data:result,chartData:_getChartData(result.usage)}},getUsageByMonth:function(year){var result=function(year){var months=_getMonths(year),usage=_.map(months,function(entry){return _getUsageByUser(year,entry).total}),total=_getUsageByYear(year);return _.each(usage,function(value,index){value.percent=+(100*value.total/total.total).toFixed(1)}),{usage:usage,total:total}}(year);return{data:result,chartData:_getChartData(result.usage)}},getUsageByYear:function(){var result=_getYears();return{data:result=_.map(result,function(entry){return _getUsageByYear(entry)}),chartData:_getChartData(result)}}}}),angular.module("BWMonApp.UsageByUser",["ngRoute"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/UsageByUser",{templateUrl:"usagebyuser/usageByUser.tpl.html",controller:"UsageByUserController",controllerAs:"usageByUserCtrl"})}]).controller("UsageByUserController",["$scope","dataService","chartService",function($scope,dataService,chartService){var ctrl=this,reset=function(){ctrl.selected.user="",ctrl.predicate="IP",ctrl.descending=!1},findUserData=function(value){var result;return value%1==0&&(result=_.find(ctrl.data,function(item){return value===item.id})),result};ctrl.selected={},ctrl.pageSize=15,reset(),ctrl.setOrder=function(predicate){ctrl.descending=ctrl.predicate===predicate&&!ctrl.descending,ctrl.predicate=predicate},ctrl.getOrder=function(predicate){return ctrl.predicate===predicate?ctrl.descending?{desc:!0}:{asc:!0}:{}},ctrl.getLabel=function(value){var result="",item=findUserData(value);return null!=item&&(result=item.IP),result},ctrl.getTooltip=function(value){var result="",item=findUserData(value);return null!=item&&(result=item.IP+" | "+item.MAC+" | "+item.user),result},$scope.$watch("usageByUserCtrl.selected.year",function(){reset(),ctrl.selected.month=dataService.getMonths(ctrl.selected.year)[0]},!0),$scope.$watch("usageByUserCtrl.selected.month",function(){reset()},!0),$scope.$watch("usageByUserCtrl.selected",function(){var usageData=dataService.getUsageByUser(ctrl.selected.year,ctrl.selected.month,ctrl.selected.user);ctrl.data=usageData.data.usage,ctrl.total=usageData.data.total,ctrl.chartData=chartService.getChartData(usageData.chartData),ctrl.chartOptions=chartService.getChartOptions(ctrl.getLabel,ctrl.getTooltip),ctrl.chartOptions.series[0].type=ctrl.selected.chartType},!0)}]),angular.module("BWMonApp.UsageByYear",["ngRoute"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/UsageByYear",{templateUrl:"usagebyyear/usageByYear.tpl.html",controller:"UsageByYearController",controllerAs:"usageByYearCtrl"})}]).controller("UsageByYearController",["$scope","dataService","chartService",function($scope,dataService,chartService){var ctrl=this,usageData=dataService.getUsageByYear();ctrl.setOrder=function(predicate){ctrl.descending=ctrl.predicate!==predicate||!ctrl.descending,ctrl.predicate=predicate},ctrl.getOrder=function(predicate){return ctrl.predicate===predicate?ctrl.descending?{desc:!0}:{asc:!0}:{}},ctrl.getLabel=function(value){return value%1==0?value:""},$scope.$watch("usageByYearCtrl.selected.chartType",function(){ctrl.chartOptions.series[0].type=ctrl.selected.chartType},!0),ctrl.predicate="id",ctrl.descending=!0,ctrl.selected={},ctrl.data=usageData.data,ctrl.chartData=chartService.getChartData(usageData.chartData),ctrl.chartOptions=chartService.getChartOptions(ctrl.getLabel,ctrl.getLabel)}]),angular.module("BWMonApp.UsageByMonth",["ngRoute"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/UsageByMonth",{templateUrl:"usagebymonth/usageByMonth.tpl.html",controller:"UsageByMonthController",controllerAs:"usageByMonthCtrl"})}]).controller("UsageByMonthController",["$scope","dataService","chartService",function($scope,dataService,chartService){var ctrl=this,reset=function(){ctrl.predicate="id",ctrl.descending=!0};ctrl.selected={},reset(),ctrl.setOrder=function(predicate){ctrl.descending=ctrl.predicate!==predicate||!ctrl.descending,ctrl.predicate=predicate},ctrl.getOrder=function(predicate){return ctrl.predicate===predicate?ctrl.descending?{desc:!0}:{asc:!0}:{}},ctrl.getLabel=function(value){var result="";return value%1==0&&0<=value&&value<=11&&(result=moment({month:value}).format("MMMM")),result},$scope.$watch("usageByMonthCtrl.selected",function(){var usageData=dataService.getUsageByMonth(ctrl.selected.year);ctrl.data=usageData.data.usage,ctrl.total=usageData.data.total,ctrl.chartData=chartService.getChartData(usageData.chartData),ctrl.chartOptions=chartService.getChartOptions(ctrl.getLabel,ctrl.getLabel),ctrl.chartOptions.series[0].type=ctrl.selected.chartType,reset()},!0)}])}();
//# sourceMappingURL=bwmon.min.js.map
